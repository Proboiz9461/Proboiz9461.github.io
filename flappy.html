<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flappy Bird</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #70c5ce;
  overflow: hidden;
}
canvas { display: block; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

// Sounds
const flapS = new Audio("move.mp3");
const hitS = new Audio("hit.mp3");
const scoreS = new Audio("score.mp3");
const failS = new Audio("fail.mp3");
const levelupS = new Audio("levelup.mp3");

// Bird
let bird = {x:50, y:canvas.height/2, v:0};
let pipes = [];
let score = 0;

function resetGame(){
  bird.y = canvas.height/2;
  bird.v = 0;
  pipes = [];
  score = 0;
}

function update(){
  bird.v += 0.5; // gravity
  bird.y += bird.v;

  if(bird.y > canvas.height || bird.y < 0){ hitS.play().catch(()=>{}); resetGame(); }

  // Pipes
  if(pipes.length===0 || pipes[pipes.length-1].x < canvas.width-200){
    pipes.push({x:canvas.width, gap:150+Math.random()*100});
  }

  pipes.forEach((p,index)=>{
    p.x -= 2;
    if(bird.x+30>p.x && bird.x<p.x+60 && (bird.y<p.gap-60 || bird.y>p.gap+60)){
      hitS.play().catch(()=>{});
      resetGame();
    }
    if(p.x+60 === bird.x){ score++; scoreS.play().catch(()=>{}); if(score%5===0) levelupS.play().catch(()=>{}); }
  });

  pipes = pipes.filter(p=>p.x+60>0);
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Bird
  ctx.fillStyle="yellow";
  ctx.fillRect(bird.x,bird.y,30,30);

  // Pipes
  ctx.fillStyle="green";
  pipes.forEach(p=>{
    ctx.fillRect(p.x,0,60,p.gap-60);
    ctx.fillRect(p.x,p.gap+60,60,canvas.height);
  });

  // Score
  ctx.fillStyle="white";
  ctx.font="30px Arial";
  ctx.fillText("Score: "+score,20,40);
}

// Controls
document.addEventListener("keydown", ()=>{ bird.v=-7; flapS.play().catch(()=>{}); });
document.addEventListener("click", ()=>{ bird.v=-7; flapS.play().catch(()=>{}); });

// Loop
function loop(){ update(); draw(); requestAnimationFrame(loop); }
loop();
</script>
</body>
</html>
