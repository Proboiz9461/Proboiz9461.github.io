<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Global Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="login">
  <h2>Enter Chat</h2>
  <input id="username" placeholder="Username">
  <button onclick="joinChat()">Join</button>
</div>

<div id="chat" class="hidden">
  <div id="messages"></div>

  <div class="input-area">
    <input id="messageInput" placeholder="Type message..." autocomplete="off">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
 const firebaseConfig = {
  apiKey: "AIzaSyD296o21zfBE3nBvedbPrgEnMrfQFUbvPU",
  authDomain: "online-chat-app-8b344.firebaseapp.com",
  databaseURL: "https://online-chat-app-8b344-default-rtdb.firebaseio.com",
  projectId: "online-chat-app-8b344",
  storageBucket: "online-chat-app-8b344.firebasestorage.app",
  messagingSenderId: "464010409036",
  appId: "1:464010409036:web:0df1cc7d85740e270eb0e9",
  measurementId: "G-VJL1LCEGSB"
};

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const messagesRef = db.ref("messages");

  let username = "";

  function joinChat() {
    const input = document.getElementById("username");
    if (!input.value.trim()) return;

    username = input.value.trim();
    document.getElementById("login").style.display = "none";
    document.getElementById("chat").classList.remove("hidden");
  }

  function sendMessage() {
    const input = document.getElementById("messageInput");
    if (!input.value.trim()) return;

    messagesRef.push({
      user: username,
      text: input.value,
      time: Date.now()
    });

    input.value = "";
  }

  messagesRef.limitToLast(100).on("child_added", snap => {
    const msg = snap.val();
    const div = document.createElement("div");
    div.className = "message";
    div.innerHTML = `<strong>${msg.user}</strong>: ${msg.text}`;
    document.getElementById("messages").appendChild(div);
    document.getElementById("messages").scrollTop = 999999;
  });

  document.getElementById("messageInput")
    .addEventListener("keydown", e => {
      if (e.key === "Enter") sendMessage();
    });
</script>

</body>
</html>
