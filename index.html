<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GLOBAL COMMAND – 3D EARTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="style.css">

<!-- THREE.JS -->
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
</head>

<body>

<div class="hud-frame"></div>

<header class="top-bar">
  ◉ GLOBAL COMMAND ONLINE
</header>

<div id="hud">CLICK EARTH</div>

<script>
/* SCENE */
const scene = new THREE.Scene();

/* CAMERA */
const camera = new THREE.PerspectiveCamera(
  60,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.z = 3;

/* RENDERER */
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* CONTROLS */
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.minDistance = 1.5;
controls.maxDistance = 6;

/* LIGHT */
scene.add(new THREE.AmbientLight(0xffffff, 1.2));
const dir = new THREE.DirectionalLight(0xffffff, 1);
dir.position.set(5,3,5);
scene.add(dir);

/* EARTH TEXTURE */
const loader = new THREE.TextureLoader();
const earthMap = loader.load(
  "https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg"
);

/* EARTH */
const earth = new THREE.Mesh(
  new THREE.SphereGeometry(1, 64, 64),
  new THREE.MeshStandardMaterial({ map: earthMap })
);
scene.add(earth);

/* STARS */
const starGeo = new THREE.BufferGeometry();
const starCount = 10000;
const starPos = [];
for(let i=0;i<starCount;i++){
  starPos.push(
    (Math.random()-0.5)*200,
    (Math.random()-0.5)*200,
    (Math.random()-0.5)*200
  );
}
starGeo.setAttribute(
  "position",
  new THREE.Float32BufferAttribute(starPos,3)
);
const stars = new THREE.Points(
  starGeo,
  new THREE.PointsMaterial({ color:0x00ffff })
);
scene.add(stars);

/* RAYCAST CLICK */
const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();

window.addEventListener("click", e=>{
  mouse.x = (e.clientX / window.innerWidth)*2-1;
  mouse.y = -(e.clientY / window.innerHeight)*2+1;
  raycaster.setFromCamera(mouse, camera);
  const hit = raycaster.intersectObject(earth);
  if(hit.length){
    const p = hit[0].point.normalize();
    const lat = 90 - Math.acos(p.y)*180/Math.PI;
    const lon = Math.atan2(p.z,p.x)*180/Math.PI;
    document.getElementById("hud").innerText =
      `LAT ${lat.toFixed(2)} | LNG ${lon.toFixed(2)}`;
  }
});

/* ANIMATE */
function animate(){
  requestAnimationFrame(animate);
  earth.rotation.y += 0.0006;
  controls.update();
  renderer.render(scene,camera);
}
animate();

/* RESIZE */
window.addEventListener("resize",()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
